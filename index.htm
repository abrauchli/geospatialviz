<!doctype html>
<html>
<head>
    <title>U.S. Trade Visualization</title>
    <!--External Libraries js -->
    <script type="text/javascript" src="lib/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="lib/jquery-ui-1.10.4.custom.min.js"></script>
    <script type="text/javascript" src="lib/flot/jquery.flot.min.js"></script>
    <script type="text/javascript" src="lib/jsapi/jsapi.js"></script>
    <script type="text/javascript" src="lib/chosen/chosen.jquery.js"></script>
    <script type="text/javascript" src="lib/chosen/docsupport/prism.js" charset="utf-8"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js"></script>
    <script type="text/javascript" src="lib/chosen/chosen-dojo-master/chosen-dojo.js"></script>
    <!--Internal js files-->
    <script type="text/javascript" src="data/hscodes.js"></script>
    <script type="text/javascript" src="data/hscodes.json"></script>
    <script type="text/javascript" src="data/states.js"></script>
    <script type="text/javascript" src="filter.js"></script>
    <script type="text/javascript" src="map.js"></script>
    <script type="text/javascript" src="charts.js"></script>
    <script type="text/javascript" src="code.js"></script>

    <!--Stylesheets-->
    <link rel="stylesheet" href="lib/jquery-ui-1.10.4.custom.min.css">
    <link rel="stylesheet" href="lib/chosen/docsupport/style.css">
    <link rel="stylesheet" href="lib/chosen/docsupport/prism.css">
    <link rel="stylesheet" href="lib/chosen/chosen-dojo-master/chosen.css">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div id="tabs">
        <ul>
            <li><a href="#tabviz">Commodities by U.S. State</a></li>
            <li><a href="#tabworld">International Imports/Exports</a></li>
            <li><a href="#tabdata">Raw Data</a></li>
            <li><a href="#tabhelp">Help</a></li>
            <li><a href="#tabsources">Sources</a></li>
        </ul>
        <div id="tabviz">
            <div class="main">
                <div class="first_group">
                    <div id="commleftbox" title="Select the option for the visualization here. By default all commodities and states are selected for the year: 2012">
                        <div id="commodities_selector"></div>
                        <form>
                            <input type="submit" id="comsel" value="Clear Search">
                        </form>
                        <form class="selection">
                            <label for="usimportexport" class="importexportlabel">Select options to visualize</label>
                            <div id="optionscomm">
                                <div id="formatcomm">
                                    <input type="checkbox" data-year="2009" class="chkyear" id="chkusyear09"><label id="comm09" for="chkusyear09">2009</label>
                                    <input type="checkbox" data-year="2010" class="chkyear" id="chkusyear10"><label  id="comm10" for="chkusyear10">2010</label>
                                    <input type="checkbox" data-year="2011" class="chkyear" id="chkusyear11"><label id="comm11" for="chkusyear11">2011</label>
                                    <input type="checkbox" data-year="2012" class="chkyear" id="chkusyear12"><label id="comm12" for="chkusyear12">2012</label>
                                </div>
                                <select id="usimportexport" class="importexport">
                                    <option>Imports</option>
                                    <option>Exports</option>
                                </select>
                                <div id="msg"></div>
                            </div>
                            <div id="USselectmapcomm"></div>
                        </form>
                    </div>
                    <div class="rightbox" style="width:initial;">
                        <span id="commmapdesc"></span>
                        <div id="USAmap"></div>
                    </div>
                </div>
                <div class="second_group">
                    <div class="plots">
                        <div id="formatplot" title="You can toggle the charts to show or hide them">
                            <input type="checkbox" id="bpie" class="plotbutton" checked="checked"><label for="bpie" id="lpie">Pie Chart</label>
                            <input type="checkbox" id="bhistogram" class="plotbutton" checked="checked"><label for="bhistogram" id="lhistogram">Histogram</label>
                            <input type="checkbox" id="bBar" class="plotbutton" checked="checked"><label for="bBar" id="lBar">Bar Chart</label>
                        </div>
                        <div id="plotwrapper" title="You can click a chart to hold its value in the hold chart window while searching in order to make comparisons">
                            <div id="pie"></div>
                            <div id="histogram"></div>
                            <div id="Bar"></div>
                            <div id="hold" title="This is the hold box where your chart value is hold to make comparisons. You can make it bigger or smaller by clicking inside"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tabworld">
            <div class="main">
                <div class="first_group">
                    <div class="leftbox" title="Select the option for the visualization here. By default all states are selected  for the year: 2012. You need to select a state to visualize the chart below">
                        <div class="label">
                            <label for="worldimportexport" class="importexportlabel">Select options to visualize</label>
                            <div id="optionscoun">
                                <div class="label">
                                    <label for="worldyear"></label>
                                    <div id="formatcoun">
                                        <input type="checkbox" data-year="2009" class="chkyear" id="chkworldyear09"><label id="comm09" for="chkworldyear09">2009</label>
                                        <input type="checkbox" data-year="2010" class="chkyear" id="chkworldyear10"><label id="comm10" for="chkworldyear10">2010</label>
                                        <input type="checkbox" data-year="2011" class="chkyear" id="chkworldyear11"><label id="comm11" for="chkworldyear11">2011</label>
                                        <input type="checkbox" data-year="2012" class="chkyear" id="chkworldyear12"><label id="comm12" for="chkworldyear12">2012</label>
                                    </div>
                                </div>
                                <select id="worldimportexport" class="importexport">
                                    <option>Imports</option>
                                    <option>Exports</option>
                                    <option>Combined difference</option>
                                </select>
                            </div>
                        </div>
                        <div id="USselectmap"></div>
                        <div id="state_selector"></div>
                    </div>
                    <div class="rightbox" style="width:initial;">
                        <span id="worldmapdesc"></span>
                        <div id="worldmap"></div>
                    </div>
                </div>
                <div class="second_group">
                    <div class="plots">
                        <div id="sankey" style="width: 900px; height: 300px;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div id="tabdata">
            <h2>Data</h2>
            <select id="tabdataselect">
                <option>Select an option</option>
                <option>State Export by Country</option>
                <option>State Import by Country</option>
                <option>State Export by Commodities</option>
                <option>State Import by Commodities</option>
            </select>
            <div id="tbldata"></div>
        </div>
        <div id="tabhelp">
            <h2>Visualization of US Trade Data</h2>
            <p>The page is divided into five tabs: the domestic visualization, the international
                visualization, the raw data, the help section and the source reference.</p>
            <p>Some <a href="#trends">interesting facts and trends</a> are also documented on this page.</p>
            <p>Please refer to the <a href="setup.htm">setup instructions</a> for help on deploying the project.</p>
            <h2>User Manual</h2>
            <p>In both, the domestic and the internation trade visualization, the user may select
            any number of states, a trade type (imports, exports, or the difference (only on
            international view)) and a combination of the years 2009 to 2012. States are both
            selected and deselected by clicking on them. To avoid having to select all states for a
            country-wide view, when no states are selected, the visualization is the same as if all
            states were selected. This is the selection that is presented on page load.
                <img src="http://puu.sh/7BAau.png" alt="Selection is done via the highlighted ‘input box’ click states, years here."></p>

            <p>The selection will then be tallied and passed into the charts located at the bottom
                of the screen.
                <img src="http://puu.sh/7BwSC.png" alt="As can be seen, all states selected by default"></p>

            <p>On initial load, all three charts, histogram, pie chart, and column chart; are
                displayed. The user may remove/add the charts by clicking "Menu" which expands into a
                choice of pie chart, column chart and histogram, which will toggle their visibility.
                <img src="http://puu.sh/7Bzgw.png" alt="Menu">
            </p>

            <img src="http://puu.sh/7Bzr6.png" alt="Selection of charts">
            <p>While viewing the charts, a chart may be expanded by clicking on the chart element.
                This will make it appear in the bottom left window, which allows the user to zoom onto the the element. Once the
                element appears in the zoom window to enlarge the chart. The chart can be scaled
                back down by clicking on it. This view is particularly useful for comparing
                different graphs, as it will not change until another chart is selected to replace
                it.
                <img src="http://puu.sh/7BzWt.png" alt="Expanded chart window"></p>

            <p>The default tab is "Commodities by U.S. state" to change your view, choose from the
                tabs at the top. Example: if you wish to see trade on the international scale
                select, "International Imports/Exports."
                <img src="http://puu.sh/7By1B.jpg" alt="Below the two windows you will see a sankey chat visually breaking down the quantities of trade between selected states and chosen country."/></p>

            <p>The "Raw Data" tab features a table of the visualization's data. After selection of
                the trade data, its rows are shown by state in relation to either commodity or
                country. Each column contains a quantity showing the breakdown between the state and
                country/commodity such as quantity per year, % share and changes in percent. The
                table can be sorted by clicking on its headers.
                <img src="http://puu.sh/7Bz31.png" alt="Each row features a state and its target followed by a break down of data by column."></p>

            <h3 id="trends">Facts and Trends</h3>
            <p>With the creation of the maps and charts to display import/export data a few trends
                begin to emerge. First and foremost, it is that states with high population tend to have
                higher levels of imports and exports. However defying the trend Texas has the highest
                level of exports, a state with two-thirds the population of California. In fact, it even
                surpasses the import levels of California.</p>
			<strong>Sources</strong><br>
			<img src="http://puu.sh/7C6JI.png">
			<a href="http://factfinder2.census.gov/faces/tableservices/jsf/pages/productview.xhtml?pid=PEP_2013_PEPANNRES&prodType=table"> <img src="http://puu.sh/7C6Qo.png"> </a>
			<p>This anomaly is explained by the NAFTA (North American Free Trade Agreement) which
                results in Mexico importing one-third of exports from Texas. The state also has the
                nations largest <a href="http://www.tshaonline.org/handbook/online/articles/eqr01">
                amount of railroads </a> and has the <a href="http://www.portofhouston.com/about-us/overview/"> busiest ports in the world and the
                busisiest in the united states.</a>
                </p>
            <p>The impact of ports and rail yards are nearly as high as that of population. Though
                somewhat common sense that is proven above. Now moving onto the nation's exports:
                <strong>Animal & Animal Products 1-5 </strong>
                <link src="http://puu.sh/7C8hy.jpg"> 
                <strong>Mineral Products 6-15 </strong>
                <img src="http://puu.sh/7C8m3.png">
                <strong>Foodstuffs 16-24</strong>
                <img src="http://puu.sh/7C89m.jpg" >
                <strong>Mineral Products 25-27</strong>
                <img src="http://puu.sh/7C8wZ.png" >
                <strong>Chemicals & Allied Industries 28-38</strong>
                <img src="http://puu.sh/7C8De.png" >
                <strong>Textiles 50-63 and Metals 72-83</strong>
                <img src="http://puu.sh/7C8Si.png" >
                <strong>Machinery 84-85</strong>
                <img src="http://puu.sh/7C8Op.jpg">
                <strong>Transportation 86-89</strong>
                <img src="http://puu.sh/7C8Wr.png">
			</p>
            <p>First and foremost, we see that the top four consumers of American Exports are
                Canada, Mexico, China and Brazil. When it comes to imports it is China, Canada, Mexico,
                and then Brazil/Germany/India.
                <img src="http://puu.sh/7C9RL.jpg" >
                <img src="http://puu.sh/7Ca2e.jpg">
			</p>
            <p>Observing this it is simple to see why some Texas which is holds the majority of the
                border with Mexico is the largest state of raw imports and exports while despite having
                miles more coast line and population California is second. Additionally Northern states
                such as Illinois and Michigan share imports and exports through the lakes with Canada.
                Below we can see the majority of their trade going towards Canada:
                <img src ="http://puu.sh/7Caan.jpg" >
			</p>
            <p>Oddly enough, the exports AND imports have been growing incredibly fast between the
                USA and China between 2009 and 2012. Perhaps the most shocking statistic is the rate at
                which each has grown. China's imports from the USA has grown 63% while it's exports to
                the USA have grown 69%. Although the quantities do have a disparity since Chinese
                imports in the USA have grown from ~293k to ~422k while the exports from USA to China
                are only a mere ~69k to ~109k.</p>
            <p>Some interesting statistics, Russia for being one of the world's largest nations
                imports less from the USA than Turkey, and exports and imports less than the a couple
                rather small of western European nations (UK, Italy, France, Germany). Additionally
                there are surprisingly less total imports from India than from Germany. Finally, Hawaii
                is the only state with Coffee as top export commodity
			</p>
        </div>
        <div id="tabsources">
            <h2>Sources</h2>
            <p>Page, Visualization, Code: Copyleft 2014, Andreas Brauchli, Alberto Gonzalez, Patryk Poborca.<br>
            Data extracted from <a href="http://www.census.gov/foreign-trade/statistics/state/data/index.html">census.gov</a><br>
            Harmonized System Codes extracted from <a href="http://www.foreign-trade.com/reference/hscode.htm">foreign-trade.com</a></p>
        </div>
    </div>
</body>
</html>
